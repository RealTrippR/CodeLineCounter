#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>
#include <windows.h>


void listFilesInDir(const char *directory) {
    WIN32_FIND_DATA findFileData;
    HANDLE hFind;

    char searchPath[MAX_PATH];
    snprintf(searchPath, MAX_PATH, "%s\\*", directory);

    hFind = FindFirstFile(searchPath, &findFileData);
    if (hFind == INVALID_HANDLE_VALUE) {
        printf("No files found in directory: %s\n", directory);
        return;
    }

    do {
        printf("%s\n", findFileData.cFileName);
    } while (FindNextFile(hFind, &findFileData) != 0);

    FindClose(hFind);
}


struct excludeInfo {
    char* excludeExtensions[512];
    uint16_t excludeExtensionCount;
    char* excludeDirectories[512];
    uint16_t excludeDirectoryCount;
};

const char *get_filename_ext(const char *filename) {
    const char *dot = strrchr(filename, '.');
    if(!dot || dot == filename) return "";
    return dot + 1;
}

void getLineCountOfFilesInDirectory(struct excludeInfo* exclude) 
{
    for (uint16_t i = 0; i < exclude->excludeExtensionCount; ++i) {

    }
}

int main() {
    uint64_t lineCount = 0u;
    struct excludeInfo excludeInfo = {0,0,0,0};
    const char* dir = "C:\\Users\\TrippR\\OneDrive\\Pictures\\3D Modeling";
    listFilesInDir(dir);
}